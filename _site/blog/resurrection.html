<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Resurrection</title>
        <meta name="description" content="Finally took the old personal blog from d5 to d6 and gave it a face lift. The new Acquia Slate theme is pretty slick, but I wanted to give it just a small bit of uniqueness, so I wrote a little custom function into the theme in order to pull up random photos from one of my Flickr sets. It was fast and fun, made easy with the Flickr module’s API. Here’s a couple quick steps I took:


Edited the page-front.tpl.php and inserted a little logic to give the #preface-wrapper a different background-image property.

&lt;div id="preface-wrapper" class="clearfix" style="background-image: url();"&gt;

Wrote a custom function based off of the flickr_block.module's flickr_block_photoset_random() function. The function returns just the flickr farm url instead of running through the theme functions.

function acquia_slate_flickr_block_photoset_random($nsid, $show_n, $size, $photoset_id) {
  // Get information about the photoset, including the owner.
  $info = flickr_photoset_get_info($photoset_id);
  if (!$info) {
    return;
  }

  // Get a list of "all" the photos in the photoset. This is cached.
  $response = flickr_request('flickr.photosets.getPhotos',
    array(
      'photoset_id' =&gt; $photoset_id,
      'per_page' =&gt; 500, // get as many images as possible
      'extras' =&gt; 'owner',
    )
  );
  if (!$response) {
    return;
  }

  // Randomly display $show_n of them
  $photos = $response['photoset']['photo'];
  shuffle($photos);

  $output = flickr_photo_img($photos[0], $size);

  return $output;
}

Set the result of this new function, called with hardcoded arguments, to a theme variable within template.php's phptemplate_preprocess_page() function.

  // get a flickr image for the front page background
  $vars['flickr'] = acquia_slate_flickr_block_photoset_random($nsid, $show_n, $size, $photoset_id);




The one thing I couldn’t find was a block setting when looking at the flickr_block.module for the large size picture, which I needed.  But looking at how the url is created within flickr.inc’s flickr_photo_img() function and comparing it with an actual large image on Flickr.com, I quickly saw that the size string is simply ‘b_d’ for large.

Fun stuff!
">
        <meta name="author" content="Jerad Bitner" />

        <!-- For Facebook -->
        <meta property="og:title" content="Resurrection" />
        <meta property="og:type" content="article" />
        <meta property="og:url" content="/blog/resurrection" />
        <meta property="og:description" content="Finally took the old personal blog from d5 to d6 and gave it a face lift. The new Acquia Slate theme is pretty slick, but I wanted to give it just a small bit of uniqueness, so I wrote a little custom function into the theme in order to pull up random photos from one of my Flickr sets. It was fast and fun, made easy with the Flickr module’s API. Here’s a couple quick steps I took:


Edited the page-front.tpl.php and inserted a little logic to give the #preface-wrapper a different background-image property.

&lt;div id="preface-wrapper" class="clearfix" style="background-image: url();"&gt;

Wrote a custom function based off of the flickr_block.module's flickr_block_photoset_random() function. The function returns just the flickr farm url instead of running through the theme functions.

function acquia_slate_flickr_block_photoset_random($nsid, $show_n, $size, $photoset_id) {
  // Get information about the photoset, including the owner.
  $info = flickr_photoset_get_info($photoset_id);
  if (!$info) {
    return;
  }

  // Get a list of "all" the photos in the photoset. This is cached.
  $response = flickr_request('flickr.photosets.getPhotos',
    array(
      'photoset_id' =&gt; $photoset_id,
      'per_page' =&gt; 500, // get as many images as possible
      'extras' =&gt; 'owner',
    )
  );
  if (!$response) {
    return;
  }

  // Randomly display $show_n of them
  $photos = $response['photoset']['photo'];
  shuffle($photos);

  $output = flickr_photo_img($photos[0], $size);

  return $output;
}

Set the result of this new function, called with hardcoded arguments, to a theme variable within template.php's phptemplate_preprocess_page() function.

  // get a flickr image for the front page background
  $vars['flickr'] = acquia_slate_flickr_block_photoset_random($nsid, $show_n, $size, $photoset_id);




The one thing I couldn’t find was a block setting when looking at the flickr_block.module for the large size picture, which I needed.  But looking at how the url is created within flickr.inc’s flickr_photo_img() function and comparing it with an actual large image on Flickr.com, I quickly saw that the size string is simply ‘b_d’ for large.

Fun stuff!
" />

        <!-- For Twitter -->
        <meta name="twitter:card" content="summary" />
        <meta name="twitter:title" content="Resurrection" />
        <meta name="twitter:description" content="Finally took the old personal blog from d5 to d6 and gave it a face lift. The new Acquia Slate theme is pretty slick, but I wanted to give it just a small bit of uniqueness, so I wrote a little custom function into the theme in order to pull up random photos from one of my Flickr sets. It was fast and fun, made easy with the Flickr module’s API. Here’s a couple quick steps I took:


Edited the page-front.tpl.php and inserted a little logic to give the #preface-wrapper a different background-image property.

&lt;div id="preface-wrapper" class="clearfix" style="background-image: url();"&gt;

Wrote a custom function based off of the flickr_block.module's flickr_block_photoset_random() function. The function returns just the flickr farm url instead of running through the theme functions.

function acquia_slate_flickr_block_photoset_random($nsid, $show_n, $size, $photoset_id) {
  // Get information about the photoset, including the owner.
  $info = flickr_photoset_get_info($photoset_id);
  if (!$info) {
    return;
  }

  // Get a list of "all" the photos in the photoset. This is cached.
  $response = flickr_request('flickr.photosets.getPhotos',
    array(
      'photoset_id' =&gt; $photoset_id,
      'per_page' =&gt; 500, // get as many images as possible
      'extras' =&gt; 'owner',
    )
  );
  if (!$response) {
    return;
  }

  // Randomly display $show_n of them
  $photos = $response['photoset']['photo'];
  shuffle($photos);

  $output = flickr_photo_img($photos[0], $size);

  return $output;
}

Set the result of this new function, called with hardcoded arguments, to a theme variable within template.php's phptemplate_preprocess_page() function.

  // get a flickr image for the front page background
  $vars['flickr'] = acquia_slate_flickr_block_photoset_random($nsid, $show_n, $size, $photoset_id);




The one thing I couldn’t find was a block setting when looking at the flickr_block.module for the large size picture, which I needed.  But looking at how the url is created within flickr.inc’s flickr_photo_img() function and comparing it with an actual large image on Flickr.com, I quickly saw that the size string is simply ‘b_d’ for large.

Fun stuff!
" />

        <!-- Google Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
        
        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">
    </head>
    <body>
      <nav class="navbar navbar-expand-lg sticky-top">
        <div class="container-fluid">
          <a class="navbar-brand d-flex align-items-center" href="/">
            <img class='gravatar rounded-circle me-2' src="http://www.gravatar.com/avatar/4950478a2c8a6627004a41b2617948a4?s=45" alt="Jerad Bitner" />
            Jerad Bitner
          </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link" href="/">Home</a>
              </li>

              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                  Jenney Journals
                </a>
                <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                  
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                      
                    
                  
                    
                    
                      
                    
                      
                    
                  
                    
                    
                      
                    
                      
                    
                  
                    
                    
                      
                    
                      
                        <li><a class="dropdown-item" href="/2020/02/jenney-journal-1/">Jenney Journal, part 1</a></li>
                      
                    
                  
                    
                    
                      
                    
                      
                        <li><a class="dropdown-item" href="/2020/02/jenney-journal-2/">Jenney Journal, part 2</a></li>
                      
                    
                  
                    
                    
                      
                    
                      
                        <li><a class="dropdown-item" href="/2020/02/jenney-journal-3/">Jenney Journal, part 3</a></li>
                      
                    
                  
                    
                    
                      
                    
                      
                        <li><a class="dropdown-item" href="/2020/02/jenney-journal-4/">Jenney Journal, part 4</a></li>
                      
                    
                  
                    
                    
                      
                    
                      
                        <li><a class="dropdown-item" href="/2020/02/jenney-journal-5/">Jenney Journal, part 5</a></li>
                      
                    
                  
                    
                    
                      
                    
                      
                        <li><a class="dropdown-item" href="/2020/02/jenney-journal-6/">Jenney Journal, part 6</a></li>
                      
                    
                  
                    
                    
                      
                    
                      
                        <li><a class="dropdown-item" href="/2020/02/jenney-journal-7/">Jenney Journal, part 7</a></li>
                      
                    
                  
                    
                    
                      
                    
                      
                        <li><a class="dropdown-item" href="/2020/02/jenney-journal-8/">Jenney Journal, part 8</a></li>
                      
                    
                  
                    
                    
                      
                    
                      
                        <li><a class="dropdown-item" href="/2020/02/jenney-journal-9/">Jenney Journal, part 9</a></li>
                      
                    
                  
                    
                    
                      
                    
                      
                        <li><a class="dropdown-item" href="/2020/03/jenney-journal-10/">Jenney Journal, part 10</a></li>
                      
                    
                  
                    
                    
                      
                    
                      
                        <li><a class="dropdown-item" href="/2020/03/jenney-journal-11/">Jenney Journal, part 11</a></li>
                      
                    
                  
                    
                    
                      
                    
                      
                        <li><a class="dropdown-item" href="/2020/03/jenney-journal-12/">Jenney Journal, part 12</a></li>
                      
                    
                  
                    
                    
                      
                    
                      
                        <li><a class="dropdown-item" href="/2020/03/jenney-journal-13/">Jenney Journal, part 13</a></li>
                      
                    
                  
                    
                    
                      
                    
                      
                        <li><a class="dropdown-item" href="/2020/03/jenney-journal-14/">Jenney Journal, part 14</a></li>
                      
                    
                  
                    
                    
                      
                    
                      
                        <li><a class="dropdown-item" href="/2020/03/jenney-journal-15/">Jenney Journal, part 15</a></li>
                      
                    
                  
                    
                    
                      
                    
                      
                        <li><a class="dropdown-item" href="/2020/03/jenney-journal-16/">Jenney Journal, part 16</a></li>
                      
                    
                  
                    
                    
                      
                    
                      
                        <li><a class="dropdown-item" href="/2020/03/jenney-journal-team/">Jenney Journal, Jenney's Team</a></li>
                      
                    
                  
                    
                    
                      
                    
                      
                        <li><a class="dropdown-item" href="/2020/03/jenney-journal-17/">Jenney Journal, part 17</a></li>
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                      
                        <li><a class="dropdown-item" href="/2020/03/jenney-journal-18/">Jenney Journal, part 18</a></li>
                      
                    
                  
                    
                    
                      
                    
                      
                        <li><a class="dropdown-item" href="/2020/03/verse-collection/">Verse Collection</a></li>
                      
                    
                  
                    
                    
                      
                    
                      
                        <li><a class="dropdown-item" href="/2020/03/jenney-journal-19/">Jenney Journal, part 19</a></li>
                      
                    
                  
                    
                    
                      
                    
                      
                        <li><a class="dropdown-item" href="/2020/04/jenney-journal-20/">Jenney Journal, part 20</a></li>
                      
                    
                  
                    
                    
                      
                    
                      
                    
                  
                    
                    
                      
                    
                      
                    
                  
                    
                    
                      
                    
                      
                        <li><a class="dropdown-item" href="/2020/05/jenney-journal-21/">Jenney Journal, part 21</a></li>
                      
                    
                  
                    
                    
                      
                    
                      
                        <li><a class="dropdown-item" href="/2020/05/jenney-journal-22/">Jenney Journal, part 22</a></li>
                      
                    
                  
                    
                    
                      
                    
                      
                        <li><a class="dropdown-item" href="/2020/05/jenney-journal-23/">Jenney Journal, part 23</a></li>
                      
                    
                  
                    
                    
                      
                    
                      
                        <li><a class="dropdown-item" href="/2020/05/jenney-journal-24/">Jenney Journal, part 24</a></li>
                      
                    
                  
                    
                    
                      
                    
                      
                        <li><a class="dropdown-item" href="/2020/05/jenney-journal-25/">Jenney Journal, part 25</a></li>
                      
                    
                  
                    
                    
                      
                    
                      
                    
                  
                    
                    
                      
                    
                      
                        <li><a class="dropdown-item" href="/2020/06/jenney-journal-26/">Jenney Journal, part 26</a></li>
                      
                    
                  
                    
                    
                      
                    
                      
                        <li><a class="dropdown-item" href="/2020/07/jenney-journal-27/">Jenney Journal, part 27</a></li>
                      
                    
                  
                    
                    
                      
                    
                      
                        <li><a class="dropdown-item" href="/2020/08/jenney-journal-28/">Jenney Journal, part 28</a></li>
                      
                    
                  
                    
                    
                      
                    
                      
                        <li><a class="dropdown-item" href="/2020/09/jenney-journal-29/">Jenney Journal, part 29</a></li>
                      
                    
                  
                    
                    
                      
                    
                      
                        <li><a class="dropdown-item" href="/2020/10/jenney-journal-30/">Jenney Journal, part 30</a></li>
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                      
                        <li><a class="dropdown-item" href="/2020/11/jenney-journal-31/">Jenney Journal, part 31</a></li>
                      
                    
                  
                    
                    
                      
                    
                  
                    
                    
                      
                    
                      
                        <li><a class="dropdown-item" href="/2021/01/jenney-journal-32/">Jenney Journal, part 32</a></li>
                      
                    
                  
                    
                    
                      
                    
                  
                </ul>
              </li>
              
              <li class="nav-item">
                <a class="nav-link" href="/archive">Archive</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>

      <main class="container py-4">
        <article class="post">
  <header>
    <h1 class="subheader">
      <a href="http://prose.io/#sirkitree/sirkitree.github.com/edit/master/_posts/2009-11-12-resurrection.md" class="pencil" title="Edit with Prose.io"><span>Edit</span></a>
      Resurrection
    </h1>

    <div class="meta mb-4">
      <time pubdate="pubdate">November 12, 2009</time>
      
        <span class="ms-2 me-2">•</span>
        <span class="category">blog</span>
      
    </div>
  </header>

  <section class="content">
    <p>Finally took the old personal blog from d5 to d6 and gave it a face lift. The new Acquia Slate theme is pretty slick, but I wanted to give it just a small bit of uniqueness, so I wrote a little custom function into the theme in order to pull up random photos from one of my Flickr sets. It was fast and fun, made easy with the Flickr module’s API. Here’s a couple quick steps I took:
<!--break--></p>
<ol>
<li>Edited the page-front.tpl.php and inserted a little logic to give the #preface-wrapper a different background-image property.
<pre>
&lt;div id="preface-wrapper" class="clearfix" <?php if ($flickr): ?>style="background-image: url(<?php print $flickr; ?>);"<?php endif; ?>&gt;
</pre></li>
<li>Wrote a custom function based off of the flickr_block.module's flickr_block_photoset_random() function. The function returns just the flickr farm url instead of running through the theme functions.
<pre>
function acquia_slate_flickr_block_photoset_random($nsid, $show_n, $size, $photoset_id) {
  // Get information about the photoset, including the owner.
  $info = flickr_photoset_get_info($photoset_id);
  if (!$info) {
    return;
  }

  // Get a list of "all" the photos in the photoset. This is cached.
  $response = flickr_request('flickr.photosets.getPhotos',
    array(
      'photoset_id' =&gt; $photoset_id,
      'per_page' =&gt; 500, // get as many images as possible
      'extras' =&gt; 'owner',
    )
  );
  if (!$response) {
    return;
  }

  // Randomly display $show_n of them
  $photos = $response['photoset']['photo'];
  shuffle($photos);

  $output = flickr_photo_img($photos[0], $size);

  return $output;
}
</pre></li>
<li>Set the result of this new function, called with hardcoded arguments, to a theme variable within template.php's phptemplate_preprocess_page() function.
<pre>
  // get a flickr image for the front page background
  $vars['flickr'] = acquia_slate_flickr_block_photoset_random($nsid, $show_n, $size, $photoset_id);
</pre>
</li>
</ol>

<p>The one thing I couldn’t find was a block setting when looking at the flickr_block.module for the large size picture, which I needed.  But looking at how the url is created within flickr.inc’s flickr_photo_img() function and comparing it with an actual large image on Flickr.com, I quickly saw that the size string is simply ‘b_d’ for large.</p>

<p>Fun stuff!</p>

  </section>  
  
  
  <section class="comments mt-5">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'jbitner';
        var disqus_url = window.location.href;
        if (disqus_url.indexOf('#') >= 0) {
          disqus_url = disqus_url.split('#')[0];
        }
        var last_char = disqus_url[disqus_url.length-1]
        if (last_char == '/') {
          disqus_url = disqus_url.substring(0, disqus_url.length-1);
        }

        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </section>
  
</article>

      </main>

      <footer class="footer mt-5 py-3">
        <div class="container">
          <div class="row align-items-center">
            <div class="col-md-6">
              <p class="mb-1">
                Jerad Bitner<br>
                sirkitree@gmail.com
              </p>
            </div>
            <div class="col-md-6 text-md-end">
              <p class="mb-1">
                <a href="http://github.com/sirkitree/" class="text-decoration-none">github.com/sirkitree</a><br>
                <a href="http://twitter.com/sirkitree/" class="text-decoration-none">twitter.com/sirkitree</a>
              </p>
            </div>
          </div>
        </div>
      </footer>

      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    </body>
</html>
