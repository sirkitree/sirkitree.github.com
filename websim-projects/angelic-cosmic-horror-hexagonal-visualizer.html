<html><head><base href="https://websim.ai/c/hexgrid3d/" /><title>Angelic Cosmic Horror Hexagonal Visualizer</title><script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script><style>body{margin:0;overflow:hidden;background:#000}canvas{display:block}#i{position:absolute;top:10px;left:10px;color:#fff;font-family:Arial,sans-serif;font-size:14px;background:rgba(0,0,0,.5);padding:10px;border-radius:5px}#m{position:absolute;bottom:20px;left:50%;transform:translateX(-50%);z-index:100}</style></head><body>
<div id="i">Angelic Cosmic Horror Hexagonal Visualizer<br>Move mouse to rotate camera<br>Scroll to zoom</div>
<div id="m"><button id="s">Start Microphone</button></div>
<script id="vS" type="x-shader/x-vertex">
varying vec2 vUv;varying vec3 vP;uniform float t,T,a,c,h;vec3 d(vec3 p){float n=sin(dot(p,vec3(100.3,57.3,23.7))*.1+h);return p+n*normalize(p)*h*(1.+a*2.);}void main(){vUv=uv;vP=position;float w=sin(position.x*2.+t)*cos(position.z*2.+t)*.1;vec3 p=position;p.y+=w+a*8.;p.x*=T*(1.+a);p.z*=T*(1.+a);float A=length(p.xy)*c*(1.+a);mat2 r=mat2(cos(A),-sin(A),sin(A),cos(A));p.xy=r*p.xy;p=d(p);gl_Position=projectionMatrix*modelViewMatrix*vec4(p,1);}
</script>
<script id="fS" type="x-shader/x-fragment">
uniform float t,a,c,h;varying vec2 vUv;varying vec3 vP;vec3 b=vec3(.05,.1,.2),l=vec3(.2,.4,.6),o=vec3(.6,.3,.1),O=vec3(1.,.6,.2);float n(vec2 p){return fract(sin(dot(p,vec2(12.9898,78.233)))*43758.5453)*h*(1.+a);}void main(){float f=sin(vP.x*.5+vP.z*.5+t)*.5+.5,B=sin(t*.5)*.5+.5;vec3 C=mix(mix(b,l,f),mix(o,O,f),B)*(1.+a*5.);float g=sin(t*3.+a*10.)*.5+.5;C*=(1.+g*(.3+a*.5));float e=1.-smoothstep(.5,.7,distance(vUv,vec2(.5)));C+=e*(.3+a*.5);C=mix(C,1.-C,sin(c*10.+vP.y*5.+a*20.)*.5+.5);C=mix(C,vec3(n(vUv),n(vUv+.1),n(vUv+.2)),h*.5*(1.+a));gl_FragColor=vec4(C,.7+a*.2+h*.3);}
</script>
<script id="bVS" type="x-shader/x-vertex">
varying vec2 vUv;void main(){vUv=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1);}
</script>
<script id="bFS" type="x-shader/x-fragment">
uniform float t;uniform vec2 r;varying vec2 vUv;vec3 g(vec3 c){return pow(c,vec3(2.2));}vec3 g1(vec3 c){return pow(c,vec3(1./2.2));}vec3 s(float t,vec3 c1,vec3 c2){return mix(c1,c2,t);}vec3 s1(float t){return s(t,vec3(0.5,0.5,0.5),vec3(0.5,0.5,0.5));}vec3 s2(float t){return s(t,vec3(0.3,0.3,0.4),vec3(0.0,0.0,0.1));}float f(vec2 uv,float offset){float sl=0.1;float t2=t+offset;uv.x+=sin(t2+uv.y*3.5)/30.*sin(t2)*.5+.5;uv.y+=sin(t2*0.8+uv.x*2.9)/30.*sin(t2*1.3)*.5+.5;uv*=1.6;vec2 s=floor(uv),f=fract(uv),p,r;float d,a=0.;for(int y=-1;y<=1;y++)for(int x=-1;x<=1;x++){p=vec2(x,y);r=p-f+sin(dot(p+s,vec2(41,289)))*9.;d=length(r);a+=(sin(d*10.-t*3.)+.5)/(d*3.+1.5);}return pow(a*0.06,sl)*3.;}void main(){vec2 uv=(gl_FragCoord.xy-.5*r.xy)/r.y;float t1=f(uv,0.);float t2=f(uv,0.1);float t3=f(uv,0.2);vec3 c=g(vec3(t1,t2,t3));c=s1(c.x)+s2(c.y);c=g1(c);gl_FragColor=vec4(c,1.);}
</script>
<script>
const s=new THREE.Scene,c=new THREE.PerspectiveCamera(75,innerWidth/innerHeight,.1,1e3),r=new THREE.WebGLRenderer({antialias:!0});r.setSize(innerWidth,innerHeight),document.body.appendChild(r.domElement);const g=15,R=.3,H=.6,h=[];let C,A,D,M,L=!1;async function I(){try{const e=await navigator.mediaDevices.getUserMedia({audio:!0});C=new(window.AudioContext||window.webkitAudioContext),A=C.createAnalyser(),A.fftSize=512;const t=A.frequencyBinCount;D=new Uint8Array(t),M=C.createMediaStreamSource(e),M.connect(A),L=!0,document.getElementById('s').textContent='Stop Microphone'}catch(e){console.error('Error accessing microphone:',e),alert('Unable to access the microphone. Please check your permissions.')}}document.getElementById('s').addEventListener('click',()=>{L?(M&&M.disconnect(),M=null,C&&C.close(),C=null,L=!1,this.textContent='Start Microphone'):I()});const S=new THREE.ShaderMaterial({uniforms:{t:{value:0},T:{value:1},a:{value:0},c:{value:0},h:{value:0}},vertexShader:document.getElementById('vS').textContent,fragmentShader:document.getElementById('fS').textContent,transparent:!0});function G(e){for(let t=-e;t<=e;t++){const n=Math.max(-e,-t-e),o=Math.min(e,-t+e);for(let i=n;i<=o;i++){const n=R*1.5*t,o=R*Math.sqrt(3)*(i+t/2),a=new THREE.Mesh(new THREE.CylinderGeometry(R,R,H,6),S.clone());a.position.set(n,0,o),a.rotation.y=Math.PI/4,s.add(a),h.push(a)}}}G(g);const l=new THREE.PointLight(16777215,1,100);l.position.set(0,10,0),s.add(l);const a=new THREE.AmbientLight(4210752);s.add(a),c.position.set(0,10,10),c.lookAt(s.position);let X=0,Y=0;addEventListener('mousemove',e=>{X=(e.clientX/innerWidth)*2-1,Y=-(e.clientY/innerHeight)*2+1});const k=new THREE.Clock;function E(){return A&&L?(A.getByteFrequencyData(D),Math.pow(D.reduce((e,t)=>e+t,0)/D.length/255,2)):0}const B=new THREE.Mesh(new THREE.PlaneGeometry(100,100),new THREE.ShaderMaterial({uniforms:{t:{value:0},r:{value:new THREE.Vector2(innerWidth,innerHeight)}},vertexShader:document.getElementById('bVS').textContent,fragmentShader:document.getElementById('bFS').textContent}));B.position.z=-10,s.add(B);function F(){requestAnimationFrame(F);const e=k.getElapsedTime(),t=E(),n=.5+.5*Math.sin(.1*e+5*t),o=.5+.5*Math.sin(.05*e+3*t);h.forEach((i,a)=>{i.material.uniforms.t.value=e+.01*a,i.material.uniforms.a.value=t,i.material.uniforms.c.value=n,i.material.uniforms.h.value=o;const d=(Math.sin(2*e+.1*a)*.5+1.5)*(1+5*t);i.scale.y=d,i.rotation.y=Math.PI/4+.2*e+.01*a+t*Math.PI;const f=(Math.sin(.5*e+.1*a)*.25+1)*(1+2*t);i.material.uniforms.T.value=f,i.position.y=Math.max(0,Math.sin(5*e+.2*a)*4*t)}),c.position.x+=(10*X-c.position.x+5*Math.sin(2*e)*t)*.05,c.position.z+=(-10*Y-c.position.z+5*Math.cos(2*e)*t)*.05,c.lookAt(s.position),B.material.uniforms.t.value=e,r.render(s,c)}F(),addEventListener('resize',()=>{c.aspect=innerWidth/innerHeight,c.updateProjectionMatrix(),r.setSize(innerWidth,innerHeight),B.material.uniforms.r.value.set(innerWidth,innerHeight)}),addEventListener('wheel',e=>{const t=.1*(1+E());c.position.z+=e.deltaY*t,c.position.z=Math.max(3,Math.min(20,c.position.z))});
</script>
</body></html>