---
layout: default
title: Tag
permalink: /tags/tag/
---

<script>
  // Detect if this is a quantum-weave tag page and set up accordingly
  // Make these global so they can be reused in the main script
  window.tagPageUrlParams = new URLSearchParams(window.location.search);
  window.tagPageTag = window.tagPageUrlParams.get('tag');

  if (window.tagPageTag === 'quantum-weave') {
    // Prevent default grid.js from initializing on QW pages
    window.DISABLE_GRID = true;

    // Load quantum-weave specific assets
    const link = document.createElement('link');
    link.rel = 'stylesheet';
    link.href = '/css/quantum-weave.css';
    document.head.appendChild(link);

    const gridScript = document.createElement('script');
    gridScript.type = 'module';
    gridScript.src = '/js/grid-quantum.js';
    document.head.appendChild(gridScript);

    const qwScript = document.createElement('script');
    qwScript.src = '/js/quantum-weave.js';
    qwScript.defer = true;
    document.head.appendChild(qwScript);
  }
</script>

<div id="qw-wrapper">
  <div class="qw-hex-pattern" id="qw-pattern" style="position: fixed; inset: 0; z-index: -1; opacity: 0.3; display: none;"></div>

  <div id="qw-header-wrapper">
    <h1 id="tag-title" class="qw-display">Posts tagged with ""</h1>
  </div>

<div class="posts" id="tag-posts">
  <!-- Posts will be loaded by JavaScript -->
</div>

  <div class="all-tags mt-5">
    <h3 id="browse-tags-title">Browse all tags:</h3>
    <div class="tag-cloud">
      {% assign all_tags = site.posts | map: 'tags' | join: ',' | split: ',' | uniq | sort %}
      {% for tag in all_tags %}
        {% if tag != "" %}
          <a href="/tags/tag/?tag={{ tag | url_encode }}" class="tag me-2 mb-2">{{ tag }}</a>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</div>

<script>
// Get tag from URL parameter (reuse global variables set in first script)
const tag = window.tagPageTag;

if (tag) {
  const isQuantumWeave = tag === 'quantum-weave';

  // Apply quantum-weave specific styling
  if (isQuantumWeave) {
    const qwPattern = document.getElementById('qw-pattern');
    if (qwPattern) {
      qwPattern.style.display = 'block';
    }

    // Update titles with QW classes
    const tagTitle = document.getElementById('tag-title');
    if (tagTitle) {
      tagTitle.classList.add('qw-title');
    }

    const browseTitle = document.getElementById('browse-tags-title');
    if (browseTitle) {
      browseTitle.classList.add('qw-title');
    }

    // Add QW wrapper class
    const qwWrapper = document.getElementById('qw-wrapper');
    if (qwWrapper) {
      qwWrapper.classList.add('qw-tag-page');
    }
  }

  // Update page title
  document.getElementById('tag-title').textContent = `Posts tagged with "${tag}"`;
  document.title = `Posts tagged with "${tag}" | {{ site.title }}`;

  // Posts data
  const posts = [
    {% for post in site.posts %}
    {
      title: {{ post.title | jsonify }},
      url: {{ post.url | jsonify }},
      date: {{ post.date | date: "%b %-d, %Y" | jsonify }},
      excerpt: {{ post.excerpt | strip_html | truncatewords: 20 | jsonify }},
      tags: {{ post.tags | jsonify }},
      discipline: {{ post.discipline | jsonify }}
    }{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ];
  
  // Filter posts by tag
  const tagPosts = posts.filter(post => post.tags && post.tags.includes(tag));

  console.log('Tag:', tag);
  console.log('Total posts:', posts.length);
  console.log('Filtered posts:', tagPosts.length);
  console.log('Is Quantum Weave:', isQuantumWeave);

  // Display posts
  const postsContainer = document.getElementById('tag-posts');
  
  if (tagPosts.length === 0) {
    postsContainer.innerHTML = '<p>No posts found with this tag.</p>';
  } else {
    tagPosts.forEach(post => {
      const article = document.createElement('article');

      if (isQuantumWeave) {
        // Use quantum-weave card styling
        article.className = 'qw-narrative-card';

        let metaHtml = `<time>${post.date}</time>`;
        if (post.discipline) {
          const disciplineSlug = post.discipline.toLowerCase().replace(/\s+/g, '-');
          metaHtml += `
            <span>•</span>
            <span class="qw-discipline-badge qw-discipline-${disciplineSlug}" style="padding: 0.25rem 0.625rem; font-size: 0.625rem;">
              ${post.discipline}
            </span>`;
        }

        article.innerHTML = `
          <div class="qw-narrative-meta">
            ${metaHtml}
          </div>
          <h3 class="qw-narrative-title">
            <a href="${post.url}">${post.title}</a>
          </h3>
          <p class="qw-narrative-excerpt">${post.excerpt}</p>
        `;
      } else {
        // Use standard post styling
        article.className = 'post';

        const tagsHtml = post.tags.map(t =>
          `<a href="/tags/tag/?tag=${encodeURIComponent(t)}" class="tag">${t}</a>`
        ).join('<span class="tag-separator">, </span>');

        article.innerHTML = `
          <h2 class="post-title">
            <a href="${post.url}">${post.title}</a>
          </h2>
          <div class="post-meta">
            <time>${post.date}</time>
            <span class="ms-2 me-2">•</span>
            <span class="tags">${tagsHtml}</span>
          </div>
          <div class="post-content">
            ${post.excerpt}
            <a href="${post.url}" class="read-more">read on</a>
          </div>
        `;
      }

      postsContainer.appendChild(article);
    });
  }
} else {
  // Redirect to tags index if no tag specified
  window.location.href = '/tags/';
}
</script>

<style>
  /* Quantum Weave tag page styling */
  .qw-tag-page #tag-posts {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
    gap: 1.5rem;
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem;
  }

  .qw-tag-page .qw-narrative-card {
    background: rgba(26, 26, 46, 0.85);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 16px;
    padding: 2rem;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .qw-tag-page .qw-narrative-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 24px rgba(0, 255, 255, 0.15);
    border-color: var(--qw-quantum-cyan, #00ffff);
  }

  .qw-tag-page #qw-header-wrapper {
    text-align: center;
    padding: 3rem 2rem 2rem;
    max-width: 1200px;
    margin: 0 auto;
  }

  .qw-tag-page #tag-title {
    font-size: clamp(2rem, 5vw, 3.5rem);
    margin-bottom: 2rem;
  }

  .qw-tag-page .all-tags {
    max-width: 1200px;
    margin: 3rem auto 0;
    padding: 0 2rem;
  }

  .qw-tag-page #browse-tags-title {
    font-size: 1.5rem;
    margin-bottom: 1rem;
  }

  /* Responsive adjustments */
  @media (max-width: 768px) {
    .qw-tag-page #tag-posts {
      grid-template-columns: 1fr;
      padding: 1rem;
    }

    .qw-tag-page #qw-header-wrapper {
      padding: 2rem 1rem 1rem;
    }
  }
</style>